name: LSTM_Optimization_Phase_IV

conda_env: conda.yaml

entry_points:
  # Single experiment execution
  run_experiment:
    parameters:
      experiment_id: {type: string}
      data_dir: {type: string, default: "data/processed"}
    command: "python scripts/run_lstm_experiment.py --experiment_id {experiment_id} --data_dir {data_dir}"

  # Phase 1: Time warping ablation (4 experiments)
  phase1_sequential:
    parameters:
      data_dir: {type: string, default: "data/processed"}
    command: "python scripts/orchestrate_phases.py --mode sequential --phase 1 --data_dir {data_dir}"

  phase1_parallel:
    parameters:
      data_dir: {type: string, default: "data/processed"}
      num_workers: {type: int, default: 4}
    command: "python scripts/orchestrate_phases.py --mode parallel --phase 1 --num_workers {num_workers} --data_dir {data_dir}"

  # Phase 2: Architecture search (3 experiments)
  phase2_sequential:
    parameters:
      data_dir: {type: string, default: "data/processed"}
    command: "python scripts/orchestrate_phases.py --mode sequential --phase 2 --data_dir {data_dir}"

  # Phase 3: Depth search (3 experiments)
  phase3_sequential:
    parameters:
      data_dir: {type: string, default: "data/processed"}
    command: "python scripts/orchestrate_phases.py --mode sequential --phase 3 --data_dir {data_dir}"

  # Full pipeline (all phases)
  all_phases_sequential:
    parameters:
      data_dir: {type: string, default: "data/processed"}
    command: "python scripts/orchestrate_phases.py --mode sequential --data_dir {data_dir}"

  # Results analysis
  aggregate_results:
    parameters:
      results_dir: {type: string, default: "data/artifacts"}
      output: {type: string, default: "data/artifacts/phase_iv_analysis.txt"}
    command: "python scripts/aggregate_results.py --results_dir {results_dir} --output {output}"
